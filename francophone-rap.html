<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Pauline Baudry</title>
    <link rel="stylesheet" href="./style.css">
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <link href="https://fonts.googleapis.com/css?family=Raleway:300" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Merriweather:300" rel="stylesheet">

    <!--JAVASCRIPT-->
    <script type='text/javascript' src='https://code.jquery.com/jquery-1.10.2.min.js?ver=1.10.2'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js" type="text/javascript"></script>
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
    <script src="https://d3js.org/topojson.v2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.7.1/d3-tip.min.js"></script>



<style>
.grid line {
  stroke: lightgrey;
  stroke-opacity: 0.7;
  shape-rendering: crispEdges;
}
</style>

</head>

<body>

  <div id = 'top'>
  <!--Title of website-->
    <div id = 'title'>
      <a href = "https://paulinebaudry.com/">
      <h1>Pauline Baudry</h1>
       </a>
   </div>

  <!--Menu buttons-->
  <div id = 'menu'>
  <div class="dropdown">
    <button class="dropbtn">Data Visualisations
      <i class="fa fa-caret-down"></i>
    </button>
    <div class="dropdown-content">
      <a href="https://paulinebaudry.com/blog">Blog</a>
      <a href="https://paulinebaudry.com/tidy_tuesdays">Tidy Tuesday graphs</a>
    </div>
  </div>
</div>

	</div>



  <div id = "middle">

  <div id = "article">

    <div id = 'text-title'>
      <img src = "./img/rap-cover-long.png"  alt "Microphone on blue background" />

    <h1>A francophone rap battle</h1>
    <h2>Comparing Belgian and French hip hop music popularity through Spotify data</h2>
    <h3>July 21, 2022</h3>
</div>

<div id = 'text'>
<p>
  East coast vs West coast, who hasn’t (tentatively) done these signs with their hands, feeling oh-so-very-gangsta? French hands have recently taken a new shape, that of the “JUL” sign spelling out the name of the top-charted rapper from Marseille.
</p>
<p>
  The cities of Paris and Marseille are long time archenemies (football fans will know what I am talking about), and this rivalry is very much present in rap culture. The difference with the American rivalry (in addition to a somewhat little less crime and a lot more French swear words) is that a third player has come into the battle: Brussels. The Belgian rap scene has blown up in the past years, making its way to its francophone neighbour. This tale of three cities is portrayed in the recent Netflix show “Nouvelle Ecole”, a francophone version of the American “Rhythm and Flow”, in which aspiring rappers compete in front of a jury made up of rap icons from each of these cities (basically a rap version of “The Voice”).
</p>
<p>
  *Spoiler alert* the winner is Belgian artist Fresh La Peufra. However, throughout the show the rappers defend their turf saying their hometown are the absolute best in the game (you may not be surprised that modesty is not the main quality that emanates from contestants). Now, how can we know for sure? Turning to the largest music streaming service provider – Spotify – for data may help in attempting to answer this ever-ongoing debate. With the maximum granularity allowed from the API, we can look into the national rivalry: Belgium vs France. More specifically, I used Spotify’s popularity index (a vital metric for artists as it most likely contributes to the suggestion algorithm, but the calculations of which are not fully disclosed) as well as the number of total followers to compare which hip hop artists stand out of the top 50 of both countries.
</p>
<!--
<div id = 'web-viz>'><iframe seamless src="./Rap/rap-battle-v2.html" width='100%' height = '600px'></iframe></div>
-->
<h2>Popularity of Belgian vs French rappers in 2022</h2>

<!-- Create an element where the map will take place -->
<div id = "rap_plot">
    </div>
<br>
<p>
  Through the Spotify window at least, the rap battle is quickly settled. French rappers seem to have the upper hand. However, one Belgian rapper stands out and finds itself at the top next to his French colleagues. Looking into the total number of Spotify followers for each country's top rapper, Damso and Ninho, we can see a closer gap although the French #1 still counts nearly double of that of the Belgian counterpart.
</p>
<br>
<div class="flourish-embed" data-src="visualisation/10701521"><script src="https://public.flourish.studio/resources/embed.js"></script></div>

<p>
  Perhaps the “Nouvelle Ecole” winner indicates a change of dynamic, with a new wave of belgian rappers to come.
  <p>



</div>



<br>


  </div>

</div>

  <div id = 'bottom'>
        <div class = 'link-icon'>
        <a href="https://www.linkedin.com/in/pauline-baudry/" target = "_blank">
          <img src = "./img/linkedin.png"  alt "Linkedin logo" />
        </a>
      </div>

        <div class = 'link-icon'>
        <a href = "https://twitter.com/PauBaudry"target = "_blank">
          <img src = "./img/twitter.png"  alt "Twitter logo" />
        </a>
      </div>

        <div  class = 'link-icon'>
        <a href = "mailto:pauline.a.baudry@gmail.com"target = "_blank">
          <img src = "./img/email.png" alt "Email logo" />
        </a>
      </div>
  </div>


<script>
const MARGIN = { LEFT: 80, RIGHT: 10, TOP: 10, BOTTOM: 120 }
const WIDTH = 600 - MARGIN.LEFT - MARGIN.RIGHT
const HEIGHT = 400 - MARGIN.TOP - MARGIN.BOTTOM

  var svg = d3.select("div#rap_plot")
     .append("div")
     // Container class to make it responsive.
     .classed("svg-container", true)
     .append("svg")
     // Responsive SVG needs these 2 attributes and no width and height attr.
     .attr("preserveAspectRatio", "xMinYMin meet")
     .attr("viewBox", "0 0 600 500")
     // Class to make it responsive.
     .classed("svg-content-responsive", true)
     // Fill with a rectangle for visualization.
  	 .append('text')
  		.attr("preserveAspectRatio", "xMinYMin meet")
  	 	.attr("font-size", "20px")
  	 	.attr("opacity", "0.4")
  	 	.attr("text-anchor", "middle")

  // The svg
  var svg = d3.select("svg"),
      width = +svg.attr("width"),
      height = +svg.attr("height");

const g = svg.append("g")
  .attr("transform", `translate(${MARGIN.LEFT}, ${MARGIN.TOP})`)

  // Scales
const x = d3.scaleLinear()
	.range([0, WIDTH])
	.domain([0, 80])

const y = d3.scaleLog()
  .base(2)
	.range([HEIGHT, 0])
	.domain([100, 8000000])

  // Labels
const xLabel = g.append("text")
	.attr("y", HEIGHT + 50)
	.attr("x", WIDTH / 2)
	.attr("font-size", "16px")
  .attr("font-family","Roboto")
	.attr("text-anchor", "middle")
	.text("Spotify popularity index")
const yLabel = g.append("text")
	.attr("transform", "rotate(-90)")
	.attr("y", -60)
	.attr("x", -150)
	.attr("font-size", "16px")
  .attr("font-family","Roboto")
	.attr("text-anchor", "middle")
	.text("Number of Spotify followers")

  // X Axis
const xAxisCall = d3.axisBottom(x)
  .ticks(5)
	//.tickValues([20, 40, 60,80])
g.append("g")
	.attr("class", "x axis")
	.attr("transform", `translate(0, ${HEIGHT})`)
	.call(xAxisCall)

// Y Axis
const yAxisCall = d3.axisLeft(y)
  .ticks(8)
g.append("g")
	.attr("class", "y axis")
	.call(yAxisCall)

// add the X gridlines
// gridlines in x axis function
function make_x_gridlines() {
    return d3.axisBottom(x)
        .ticks(5)
}

// gridlines in y axis function
function make_y_gridlines() {
    return d3.axisLeft(y)
        .ticks(8)
}

function Photo(link,visib){
   g.append("svg:image")
    .attr("x",5)
    .attr("y",HEIGHT-265)
    .attr("xlink:href",link)
    .attr("width", 150)
    .attr("height", 150)
    .style("visibility", visib)
    console.log(visib)
}



d3.csv("https://raw.githubusercontent.com/paulinebaudry/paulinebaudry.github.io/master/Rap/francophone_artists.csv", function(data){


//Draw the background grid
  g.append("g")
    .attr("class", "grid")
    .attr("transform", "translate(0," + HEIGHT + ")")
    .call(make_x_gridlines()
      .tickSize(-HEIGHT)
      .tickFormat("")
    )
    g.append("g")
      .attr("class", "grid")
      .call(make_y_gridlines()
        .tickSize(-WIDTH)
        .tickFormat("")
      )

  const circles = g.selectAll("circle")
    .data(data)


      const tooltip = d3.tip()
        .attr('class','d3-tip')
        .html(d => {
          let text = `<strong>${d.name}</strong><br>`
		        text += `Number of followers: ${d.followers_total}<br>`
    		    text += `Popularity index: ${d.popularity}<br>`
          return text
        })

    g.call(tooltip)


  circles.enter().append("circle")
    .attr("cx",(d) => x(d.popularity))
    .attr("cy",(d) => y(d.followers_total))
    .attr("r",3)
    .attr("fill", function(d){
      if (d.Country == "Belgium"){return "#EF3340"}
      else {return "#0055A4"}
    })
    .on("mouseover", (d) =>{
      svg.selectAll("image").remove()
       Photo(d.images_df,"display")
    })
    .on("mouseover.circles",tooltip.show)
		.on("mouseout", tooltip.hide)

})

</script>



</body>
</html>
